## **웹 계층 개발**

![image](https://user-images.githubusercontent.com/79301439/167083677-0fc61a7e-3562-4af4-a85b-05293670ad13.png)

![image](https://user-images.githubusercontent.com/79301439/167083757-08ce9c44-ff56-442d-a591-5d697197f3c9.png)

***
  * 홈 화면과 레이아웃
    
    ![image](https://user-images.githubusercontent.com/79301439/167090384-9a155709-6ae7-43d8-9505-ca5ec5e61f8e.png)
    
    ```java
    package jpabook.jpashop.controller;

    import lombok.extern.slf4j.Slf4j;
    import org.springframework.stereotype.Controller;
    import org.springframework.web.bind.annotation.RequestMapping;

    @Controller
    @Slf4j
    public class HomeController {

        @RequestMapping("/")
        public String home() {
            log.info("home controller");
            return "home";
        }
    }
    ```
    
    ![image](https://user-images.githubusercontent.com/79301439/167090495-d5e69e51-9b2c-4c70-827d-d390704ff27a.png)
    
    ![image](https://user-images.githubusercontent.com/79301439/167090533-ac0603fa-d23b-4133-bab1-041e9c68428a.png)
    
    ![image](https://user-images.githubusercontent.com/79301439/167090580-f5599a06-5221-42ca-9332-2bece4891810.png)
    
    ```html
    <!DOCTYPE HTML>
    <html xmlns:th="http://www.thymeleaf.org">
    <head th:replace="fragments/header :: header">
        <title>Hello</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    </head>
    <body>
    <div class="container">
        <div th:replace="fragments/bodyHeader :: bodyHeader" />
        <div class="jumbotron">
            <h1>HELLO SHOP</h1>
            <p class="lead">회원 기능</p>
            <p>
                <a class="btn btn-lg btn-secondary" href="/members/new">회원 가입</a>
                <a class="btn btn-lg btn-secondary" href="/members">회원 목록</a>
            </p>
            <p class="lead">상품 기능</p>
            <p>
                <a class="btn btn-lg btn-dark" href="/items/new">상품 등록</a>
                <a class="btn btn-lg btn-dark" href="/items">상품 목록</a>
            </p>
            <p class="lead">주문 기능</p>
            <p>
                <a class="btn btn-lg btn-info" href="/order">상품 주문</a>
                <a class="btn btn-lg btn-info" href="/orders">주문 내역</a>
            </p>
        </div>
        <div th:replace="fragments/footer :: footer" />
    </div> <!-- /container -->
    </body>
    </html>
    ```
    
    ![image](https://user-images.githubusercontent.com/79301439/167090692-938c34ef-e955-4e5e-b8f9-fbb214e1054d.png)
    
    ```html
    <!DOCTYPE html>
    <html xmlns:th="http://www.thymeleaf.org">
    <head th:fragment="header">
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrinkto-fit=no">
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
              crossorigin="anonymous">
        <!-- Custom styles for this template -->
        <link href="/css/jumbotron-narrow.css" rel="stylesheet">
        <title>Hello, world!</title>
    </head>
    ```
    
    ![image](https://user-images.githubusercontent.com/79301439/167090820-754705f7-4db1-4124-8ea7-1bc593cea60e.png)
    
    ```html
    <!DOCTYPE html>
    <html xmlns:th="http://www.thymeleaf.org">
    <div class="header" th:fragment="bodyHeader">
        <ul class="nav nav-pills pull-right">
            <li><a href="/">Home</a></li>
        </ul>
        <a href="/"><h3 class="text-muted">HELLO SHOP</h3></a>
    </div>
    ```
    
    ![image](https://user-images.githubusercontent.com/79301439/167090891-87c6721a-3e53-42cb-bef6-45211b86ea1b.png)
    
    ```html
    <!DOCTYPE html>
    <html xmlns:th="http://www.thymeleaf.org">
    <div class="footer" th:fragment="footer">
        <p>&copy; Hello Shop V2</p>
    </div>
    ```
    
    ![image](https://user-images.githubusercontent.com/79301439/167091063-2e497a21-b4db-4f24-8ef9-f8144bea3d8a.png)
    
    ![image](https://user-images.githubusercontent.com/79301439/167091132-def654ac-ec3b-4bc9-b535-f458b21d533e.png)
    
    ![image](https://user-images.githubusercontent.com/79301439/167091178-a9844434-cc0f-47e4-a805-96b22521f224.png)
    
    ```css
    /* Space out content a bit */
    body {
        padding-top: 20px;
        padding-bottom: 20px;
    }
    /* Everything but the jumbotron gets side spacing for mobile first views */
    .header,
    .marketing,
    .footer {
        padding-left: 15px;
        padding-right: 15px;
    }
    /* Custom page header */
    .header {
        border-bottom: 1px solid #e5e5e5;
    }
    /* Make the masthead heading the same height as the navigation */
    .header h3 {
        margin-top: 0;
        margin-bottom: 0;
        line-height: 40px;
        padding-bottom: 19px;
    }
    /* Custom page footer */
    .footer {
        padding-top: 19px;
        color: #777;
        border-top: 1px solid #e5e5e5;
    }
    /* Customize container */
    @media (min-width: 768px) {
        .container {
            max-width: 730px;
        }
    }
    .container-narrow > hr {
        margin: 30px 0;
    }
    /* Main marketing message and sign up button */
    .jumbotron {
        text-align: center;
        border-bottom: 1px solid #e5e5e5;
    }
    .jumbotron .btn {
        font-size: 21px;
        padding: 14px 24px;
    }
    /* Supporting marketing content */
    .marketing {
        margin: 40px 0;
    }
    .marketing p + h4 {
        margin-top: 28px;
    }
    /* Responsive: Portrait tablets and up */
    @media screen and (min-width: 768px) {
        /* Remove the padding we set earlier */
        .header,
        .marketing,
        .footer {
            padding-left: 0;
            padding-right: 0;
        }
        /* Space out the masthead */
        .header {
            margin-bottom: 30px;
        }
        /* Remove the bottom border on the jumbotron for visual effect */
        .jumbotron {
            border-bottom: 0;
        }
    }
    ```

***
  * 회원 등록
    
    ![image](https://user-images.githubusercontent.com/79301439/167099726-0d2824c0-ce8c-4b41-990d-3eccb2410815.png)
    
    ```java
    package jpabook.jpashop.controller;

    import lombok.Getter;
    import lombok.Setter;

    import javax.validation.constraints.NotEmpty;

    @Getter @Setter
    public class MemberForm {

        @NotEmpty(message = "회원 이름은 필수 입니다.")
        private String name;

        private String city;
        private String street;
        private String zipcode;
    }
    ```
    
    ![image](https://user-images.githubusercontent.com/79301439/167099857-83050f1e-5ac4-4437-95bf-b0070382eabf.png)
    
    ```java
    package jpabook.jpashop.controller;

    import jpabook.jpashop.domain.Address;
    import jpabook.jpashop.domain.Member;
    import jpabook.jpashop.service.MemberService;
    import lombok.RequiredArgsConstructor;
    import org.springframework.stereotype.Controller;
    import org.springframework.ui.Model;
    import org.springframework.validation.BindingResult;
    import org.springframework.web.bind.annotation.GetMapping;
    import org.springframework.web.bind.annotation.PostMapping;

    import javax.validation.Valid;

    @Controller
    @RequiredArgsConstructor
    public class MemberController {

        private final MemberService memberService;

        @GetMapping("/members/new")
        public String createForm(Model model) {
            model.addAttribute("memberForm", new MemberForm());
            return "members/createMemberForm";
        }

        @PostMapping("/members/new")
        public String create(@Valid MemberForm form, BindingResult result) {

            if (result.hasErrors()) {
                return "members/createMemberForm";
            }

            Address address = new Address(form.getCity(), form.getStreet(), form.getZipcode());

            Member member = new Member();
            member.setName(form.getName());
            member.setAddress(address);

            memberService.join(member);
            return "redirect:/";
        }
    }
    ```
    
    ![image](https://user-images.githubusercontent.com/79301439/167099983-9db5eaa8-f4b3-456c-87f9-ce8bd72122dc.png)
    
    ```html
    <!DOCTYPE HTML>
    <html xmlns:th="http://www.thymeleaf.org">
    <head th:replace="fragments/header :: header" />
    <style>
        .fieldError {
            border-color: #bd2130;
        }
    </style>
    <body>
    <div class="container">
        <div th:replace="fragments/bodyHeader :: bodyHeader"/>
        <form role="form" action="/members/new" th:object="${memberForm}"
              method="post">
            <div class="form-group">
                <label th:for="name">이름</label>
                <input type="text" th:field="*{name}" class="form-control" placeholder="이름을 입력하세요"
                       th:class="${#fields.hasErrors('name')}? 'form-control fieldError' : 'form-control'">
                <p th:if="${#fields.hasErrors('name')}" th:errors="*{name}">Incorrect date</p>
            </div>
            <div class="form-group">
                <label th:for="city">도시</label>
                <input type="text" th:field="*{city}" class="form-control"
                       placeholder="도시를 입력하세요">
            </div>
            <div class="form-group">
                <label th:for="street">거리</label>
                <input type="text" th:field="*{street}" class="form-control"
                       placeholder="거리를 입력하세요">
            </div>
            <div class="form-group">
                <label th:for="zipcode">우편번호</label>
                <input type="text" th:field="*{zipcode}" class="form-control"
                       placeholder="우편번호를 입력하세요">
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        <br/>
        <div th:replace="fragments/footer :: footer" />
    </div> <!-- /container -->
    </body>
    </html>
    ```
